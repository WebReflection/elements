/*! (c) Andrea Giammarchi - ISC */
const e=!0,t=!1,o="querySelectorAll",r="querySelectorAll",{document:n,Element:s,MutationObserver:l,Set:a,WeakMap:c}=self,d=e=>r in e,{filter:h}=[];const{setPrototypeOf:u}=Object;
/*! (c) Andrea Giammarchi - ISC */
let i={HTML:"http://www.w3.org/1999/xhtml",SVG:"http://www.w3.org/2000/svg"};const w=[],p=new Map,f=new Map,{parse:g}=(u=>{const i=new c,w=(e,t)=>{let o;if(t)for(let r,n=(e=>e.matches||e.webkitMatchesSelector||e.msMatchesSelector)(e),s=0,{length:l}=f;s<l;s++)n.call(e,r=f[s])&&(i.has(e)||i.set(e,new a),o=i.get(e),o.has(r)||(o.add(r),u.handle(e,t,r)));else i.has(e)&&(o=i.get(e),i.delete(e),o.forEach(o=>{u.handle(e,t,o)}))},p=(e,t=!0)=>{for(let o=0,{length:r}=e;o<r;o++)w(e[o],t)},{query:f}=u,g=u.root||n,m=((r,n=document,s=MutationObserver,l=["*"])=>{const a=(t,n,s,l,c,d)=>{for(const h of t)(d||o in h)&&(c?s.has(h)||(s.add(h),l.delete(h),r(h,c)):l.has(h)||(l.add(h),s.delete(h),r(h,c)),d||a(h[o](n),n,s,l,c,e))},c=new s(o=>{if(l.length){const r=l.join(","),n=new Set,s=new Set;for(const{addedNodes:l,removedNodes:c}of o)a(c,r,n,s,t,t),a(l,r,n,s,e,t)}}),{observe:d}=c;return(c.observe=t=>d.call(c,t,{subtree:e,childList:e}))(n),c})(w,g,l,f),{attachShadow:y}=s.prototype;return y&&(s.prototype.attachShadow=function(e){const t=y.call(this,e);return m.observe(t),t}),f.length&&p(g[r](f)),{drop:e=>{for(let t=0,{length:o}=e;t<o;t++)i.delete(e[t])},flush:()=>{const e=m.takeRecords();for(let t=0,{length:o}=e;t<o;t++)p(h.call(e[t].removedNodes,d),!1),p(h.call(e[t].addedNodes,d),!0)},observer:m,parse:p}})({query:w,handle(e,t,o){if(t){const t=p.get((e=>{const t=e.indexOf('="');return e.slice(t+2,-2)})(o));e instanceof t||new t(e)}}}),m=e=>(f.has(e)||f.set(e,Promise.withResolvers()),f.get(e)),{HTML:y,SVG:M}=((e=i)=>new Proxy(new Map,{get(t,o){let r=t.get(o);if(!r){t.set(o,r=new Proxy(new Map,{get(e,t){let o=t.toLowerCase();return e.get(o)||a(e,o)}}));let n=new Map,s=e.document||document,l=s.createElementNS.bind(s,e[o]||i[o]),a=(e,t)=>{let o=n.get(t);o||n.set(t,o=l(t).constructor);class r extends((e=>{function t(e){return u(e,new.target.prototype)}return t.prototype=e.prototype,t})(o)){static tag=t;constructor(e){return super(e||l(t))}}return e.set(t,r),r}}return r}}))(),S={define(e,t){if(p.has(e)||customElements.get(e))throw new DOMException(`Element ${e} already defined`);p.set(e,t),m(e).resolve(t);const o=`[is="${e}"]`;w.push(o),g(document.querySelectorAll(o))},get:e=>p.get(e),whenDefined:e=>m(e).promise};export{y as HTML,M as SVG,S as elements};
