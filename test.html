<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
  <style>
    body {
      display: grid;
      place-items: center;
      font-family: sans-serif;
    }
    [is="my-h1"] {
      font-size: 1.5rem;
      color: darkblue;
    }
  </style>
  <script type="module">

    import element from 'https://esm.run/@webreflection/element';
    import { elements, HTML } from './dist/auto.js';

    // same Custom Elements API
    elements.whenDefined('my-h1').then(Class => {
      console.log(Class.name, 'defined');
    });

    // native extends out of the box
    // <h1 is="my-h1"></h1>
    elements.define('my-h1', class MyH1 extends HTML.H1 {
      // anything that works with classes works here
      #private;

      // only caveat:
      //   if defined, the constructor MUST forward arguments!
      constructor(...args) {
        super(...args);
        this.#private = 'test';
        // this.setAttribute('is', 'my-h1');
      }

      // custom elements lifecycle (connected/disconnected/attributeChanged)
      connectedCallback() {
        console.log('connected', this.#private);
        this.innerHTML = '@webreflection/elements ü•≥';
      }
    });

    // regular HTMLElement extends out of the box too
    // <my-element></my-element>
    elements.define('my-element', class MyElement extends HTML.Element {
      connectedCallback() {
        this.innerHTML = '<small>made with ‚ù§Ô∏è by <a href="https://github.com/WebReflection/elements">@webreflection</a></small>';
      }
    });

    // as it is for customElements, whenDefined works both
    // before and after an element has been defined
    elements.whenDefined('my-element').then(Class => {
      console.log(Class.name, 'defined');
    });

    // procedural example with explicit attribute set
    // document.body.appendChild(document.createElement('h1', { is: 'my-h1' })).setAttribute('is', 'my-h1');
    
    // class based example with attribute set in the constructor or explicitly
    // const MyH1 = elements.get('my-h1');
    // document.body.appendChild(new MyH1).setAttribute('is', 'my-h1');

    // @webreflection/element simplified procedure
    // document.body.appendChild(element('h1', { is: 'my-h1' }));

  </script>
  <h1 is="my-h1"></h1>
  <my-element></my-element>
</body>
</html>
